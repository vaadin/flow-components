<!-- Dependency resources -->
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/vaadin-grid/vaadin-grid.html">
<link rel="import" href="../bower_components/vaadin-grid/vaadin-grid-tree-toggle.html">

<!-- Defines the grid-on-client-and-slot element -->
<dom-module id="grid-on-client-and-slot">
    <template>
        <style>
        :host {
            display: flex;
            flex-direction: column;
            width: 100%;
            height: 100%;
        }
        </style>

        <vaadin-grid id="tree">
            <vaadin-grid-column>
                <template>
                    <vaadin-grid-tree-toggle leaf="[[item.leaf]]" expanded="{{expanded}}" level="[[level]]">
                        <div class="tree-cell">[[item.name]]</div>
                    </vaadin-grid-tree-toggle>
                </template>
            </vaadin-grid-column>
        </vaadin-grid>
        <button>This is a button</button>
        <slot></slot>
        </template>

    <script>
        class GridOnClientAndSlot extends Polymer.Element {
            static get is() {
                return 'grid-on-client-and-slot';
            }

            static get properties() {
                return {
                    items: {
                        type: Array,
                        value: [
                            {
                                name: 'item 1',
                                leaf: false,
                                children: [
                                    {
                                        name: 'child 1-1',
                                        leaf: true
                                    },
                                    {
                                        name: 'child 1-2',
                                        leaf: true
                                    }
                                ]
                            },
                            {
                                name: 'item 2',
                                children: [
                                    {
                                        name: 'child 2-1',
                                        leaf: true
                                    },
                                    {
                                        name: 'child 2-2',
                                        leaf: true
                                    }
                                ]
                            }
                        ]
                    }
                }
            }

            connectedCallback() {
                super.connectedCallback();

                this.$.tree.dataProvider = (params, callback) => {
                    if (params.parentItem != null) {
                        callback(params.parentItem.children, params.parentItem.children.length);
                    }
                    else {
                        callback(this.items, this.items.length);
                    }
                };
            }
        }
        customElements.define(GridOnClientAndSlot.is, GridOnClientAndSlot);
    </script>
</dom-module>